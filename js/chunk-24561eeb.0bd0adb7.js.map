{"version":3,"sources":["webpack:///./src/components/music-list/music-list.vue?6092","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?f53f","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?b026","webpack:///./src/components/top-list/top-list.vue?62b8","webpack:///./src/api/rank.js","webpack:///./src/components/top-list/top-list.vue?d5ec","webpack:///src/components/top-list/top-list.vue","webpack:///./src/components/top-list/top-list.vue?8caa","webpack:///./src/components/top-list/top-list.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","back","domProps","innerHTML","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","random","_v","attrs","data","probe-type","probeType","listen-scroll","listenScroll","scroll","rank","select","selectItem","staticRenderFns","RESEVERD_HEIGHT","transform","Object","dom","backdrop","music_listvue_type_script_lang_js_","mixins","mixin","components","Scroll","scroll_scroll","SongList","song_list","Loading","loading","scrollY","props","bgImage","type","String","default","Array","Boolean","computed","bgStyle","concat","watch","newY","translateY","Math","max","minTranslateY","zIndex","scale","blur","$refs","layer","percent","abs","imageHeight","min","filter","paddingTop","height","playBtn","display","created","mounted","clientHeight","list","$el","top","methods","objectSpread","pos","y","$router","item","index","selectPlay","randomPlay","handlePlaylist","playlist","bottom","refresh","vuex_esm","music_list_music_listvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_music_list_vue_vue_type_style_index_0_id_48b22da8_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_music_list_vue_vue_type_style_index_0_id_48b22da8_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_top_list_vue_vue_type_style_index_0_id_b0b289d2_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_top_list_vue_vue_type_style_index_0_id_b0b289d2_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default","getTopList","url","_Users_lxx_Documents_Demo_vue_music_play_node_modules_babel_runtime_corejs2_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default","commonParams","g_tk","format","notice","platform","needNewCode","uin","axios","get","params","then","res","_Users_lxx_Documents_Demo_vue_music_play_node_modules_babel_runtime_corejs2_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default","a","resolve","getMusicList","topid","tpl","page","bg-image","top_listvue_type_script_lang_js_","MusicList","music_list","topList","topTitle","image","_getMusicList","id","_this","code","config","_normalizeSongs","songlist","push","ret","forEach","musicData","songid","albumid","song","top_list_top_listvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-24561eeb.0bd0adb7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length>0),expression:\"songs.length>0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"data\":_vm.songs,\"probe-type\":_vm.probeType,\"listen-scroll\":_vm.listenScroll},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"rank\":_vm.rank,\"songs\":_vm.songs},on:{\"select\":_vm.selectItem}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"music-list\">\n        <div class=\"back\" @click=\"back\">\n            <i class=\"icon-back\"></i>\n        </div>\n        <h1 class=\"title\" v-html=\"title\"></h1>\n        <div class=\"bg-image\"\n             :style=\"bgStyle\"\n             ref=\"bgImage\">\n            <div class=\"play-wrapper\">\n                <div class=\"play\"\n                     v-show=\"songs.length>0\"\n                     @click=\"random\"\n                     ref=\"playBtn\">\n                    <i class=\"icon-play\"></i>\n                    <span class=\"text\">随机播放全部</span>\n                </div>\n            </div>\n            <div class=\"filter\" ref=\"filter\"></div>\n        </div>\n        <div class=\"bg-layer\" ref=\"layer\"></div>\n        <scroll :data=\"songs\"\n                :probe-type=\"probeType\"\n                :listen-scroll=\"listenScroll\"\n                @scroll=\"scroll\"\n                class=\"list\"\n                ref=\"list\">\n            <div class=\"song-list-wrapper\">\n                <song-list :rank=\"rank\" @select=\"selectItem\" :songs=\"songs\"></song-list>\n            </div>\n            <div class=\"loading-container\" v-show=\"!songs.length\">\n                <loading></loading>\n            </div>\n        </scroll>\n    </div>\n</template>\n\n<script>\n    import Scroll from '../../base/scroll/scroll'\n    import SongList from '../../base/song-list/song-list'\n    import Loading from '../../base/loading/loading'\n    import {prefixStyle} from \"../../assets/js/dom\";\n    import {mapActions} from 'vuex'\n    import {playlistMixin} from \"../../assets/js/mixin\";\n\n\n    const RESEVERD_HEIGHT = 40\n    const transform = prefixStyle('transform')\n    const backdrop = prefixStyle('backdrop-filter')\n    export default {\n        name: \"music-list\",\n        mixins: [playlistMixin],\n        components: {\n            Scroll,\n            SongList,\n            Loading\n        },\n        data() {\n            return {\n                scrollY: 0\n            }\n        },\n        props: {\n            bgImage: {\n                type: String,\n                default: ''\n            },\n            songs: {\n                type: Array,\n                default: () => []\n            },\n            title: {\n                type: String,\n                default: ''\n            },\n            rank: {\n                type: Boolean,\n                default: false\n            }\n        },\n        computed: {\n            bgStyle() {\n                return `background-image: url(${this.bgImage})`\n            }\n        },\n        watch: {\n            scrollY(newY) {\n                let translateY = Math.max(this.minTranslateY, newY)\n                let zIndex = 0\n                let scale = 1\n                let blur = 0\n                this.$refs.layer.style[transform] = `translate3d(0, ${translateY}px, 0)`\n\n                const percent = Math.abs(newY / this.imageHeight)\n                if(newY > 0) {\n                    scale = 1 + percent\n                    zIndex = 10\n                } else {\n                    blur = Math.min(20*percent, 20)\n                }\n                this.$refs.filter.style[backdrop] = `blur(${blur}px)`\n                if (newY < this.minTranslateY) {\n                    zIndex = 10\n                    this.$refs.bgImage.style.paddingTop = 0\n                    this.$refs.bgImage.style.height = `${RESEVERD_HEIGHT}px`\n                    this.$refs.playBtn.style.display = 'none'\n                } else {\n                    this.$refs.bgImage.style.paddingTop = '70%'\n                    this.$refs.bgImage.style.height = 0\n                    this.$refs.playBtn.style.display = ''\n                }\n                this.$refs.bgImage.style.zIndex = zIndex\n                this.$refs.bgImage.style[transform] = `scale(${scale})`\n            }\n        },\n        created() {\n            this.probeType = 3\n            this.listenScroll = true\n        },\n        mounted() {\n            this.imageHeight = this.$refs.bgImage.clientHeight\n            this.minTranslateY = -this.imageHeight + RESEVERD_HEIGHT\n            this.$refs.list.$el.style.top = `${this.imageHeight}px`\n        },\n        methods: {\n            scroll(pos) {\n                this.scrollY = pos.y\n            },\n            back(){\n                this.$router.back()\n            },\n            selectItem(item, index){\n                this.selectPlay({\n                    list: this.songs,\n                    index\n                })\n            },\n            random() {\n              this.randomPlay({\n                  list: this.songs\n              })\n            },\n            handlePlaylist(playlist) {\n                const bottom = playlist.length>0 ? '60px' : ''\n                this.$refs.list.$el.style.bottom = bottom\n                this.$refs.list.refresh()\n            },\n            ...mapActions([\n                'selectPlay',\n                'randomPlay'\n            ])\n        }\n\n    }\n</script>\n\n<style scoped lang='stylus'>\n    @import \"../../assets/stylus/variable.styl\"\n    @import \"../../assets/stylus/mixin.styl\"\n\n    .music-list\n        position: fixed\n        z-index: 100\n        top: 0\n        left: 0\n        right: 0\n        bottom: 0\n        background: $color-background\n\n        .back\n            position: absolute\n            top: 0\n            left: 6px\n            z-index: 50\n\n            .icon-back\n                display: block\n                padding: 10px\n                font-size: $font-size-large-x\n                color $color-theme\n\n        .title\n            position: absolute\n            top: 0\n            left: 10%\n            z-index: 40\n            width: 80%\n            no-wrap()\n            text-align center\n            line-height 40px\n            font-size $font-size-large\n            color $color-text\n\n        .bg-image\n            position relative\n            width 100%\n            height 0\n            padding-top 70%\n            transform-origin top\n            background-size cover\n            .play-wrapper\n                position absolute\n                bottom 20px\n                z-index 50\n                width 100%\n                .play\n                    box-sizing border-box\n                    width 135px\n                    padding 7px 0\n                    margin 0 auto\n                    text-align center\n                    border 1px solid $color-theme\n                    color $color-theme\n                    border-radius 100px\n                    font-size 0\n                    .icon-play\n                        display inline-block\n                        vertical-align middle\n                        margin-right 6px\n                        font-size $font-size-medium-x\n                    .text\n                        display inline-block\n                        vertical-align middle\n                        font-size $font-size-small\n\n            .filter\n                position absolute\n                top 0\n                left 0\n                width 100%\n                height 100%\n                background: rgba(7, 17, 27, .4)\n\n        .bg-layer\n            position relative\n            height 100%\n            background: $color-background\n\n        .list\n            position fixed\n            top 0\n            bottom 0\n            width 100%\n            background $color-background\n\n            .song-list-wrapper\n                padding 20px 30px\n            .loading-container\n                position absolute\n                width 100%\n                top 50%\n                transform translateY(-50%)\n\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./music-list.vue?vue&type=template&id=48b22da8&scoped=true&\"\nimport script from \"./music-list.vue?vue&type=script&lang=js&\"\nexport * from \"./music-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./music-list.vue?vue&type=style&index=0&id=48b22da8&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48b22da8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=48b22da8&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./music-list.vue?vue&type=style&index=0&id=48b22da8&scoped=true&lang=stylus&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=style&index=0&id=b0b289d2&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=style&index=0&id=b0b289d2&scoped=true&lang=stylus&\"","import {commonParams} from \"./config\";\nimport axios from 'axios'\n\nexport function getTopList() {\n    const url = '/api/getTopList'\n\n    const data = Object.assign({}, commonParams, {\n        g_tk: 5381,\n        format: 'json',\n        notice: 0,\n        platform: 'h5',\n        needNewCode: 1,\n        uin: 0\n    })\n\n    return axios.get(url, {\n        params: data\n    }).then((res)=> {\n        return Promise.resolve(res.data)\n    })\n}\n\nexport function getMusicList(topid){\n    const url = '/api/getMusicList'\n\n    const data = Object.assign({}, commonParams, {\n        topid,\n        needNewCode: 1,\n        uin: 0,\n        tpl: 3,\n        page: 'detail',\n        type: 'top',\n        platform: 'h5'\n    })\n\n    return axios.get(url, {\n        params: data\n    }).then((res)=> {\n        return Promise.resolve(res.data)\n    })\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"rank\":_vm.rank,\"title\":_vm.title,\"bg-image\":_vm.bgImage,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <transition name=\"slide\">\n        <music-list :rank=\"rank\" :title=\"title\" :bg-image=\"bgImage\" :songs=\"songs\"></music-list>\n    </transition>\n</template>\n\n<script>\n    import MusicList from 'components/music-list/music-list'\n    import {mapGetters} from 'vuex'\n    import {getMusicList} from \"../../api/rank\";\n    import {createSong} from \"../../assets/js/song\";\n    import {ERR_OK} from \"../../api/config\";\n\n    export default {\n        name: \"top-list\",\n        components: {\n            MusicList\n        },\n        data() {\n            return {\n                songs: [],\n                rank: true\n            }\n        },\n        computed: {\n            title(){\n                return this.topList.topTitle\n            },\n            bgImage() {\n                if(this.songs.length){\n                    return this.songs[0].image\n                }\n                return ''\n            },\n            ...mapGetters([\n                'topList'\n            ])\n        },\n        created() {\n            this._getMusicList(this.topList.id)\n        },\n        methods: {\n            _getMusicList(id) {\n                if(!this.topList.id){\n                    this.$router.push('/rank')\n                    return\n                }\n                getMusicList(id).then((res)=>{\n                    if(res.code === ERR_OK){\n                        this.songs = this._normalizeSongs(res.songlist)\n                    }\n                })\n            },\n            _normalizeSongs(list){\n                let ret = []\n                list.forEach((item)=>{\n                    const musicData = item.data\n                    if(musicData.songid && musicData.albumid) {\n                        ret.push(createSong(musicData))\n                    }\n                })\n                return ret\n            }\n        }\n\n    }\n</script>\n\n<style scoped lang='stylus'>\n    .slide-enter-active, .slide-leave-active\n        transition all 0.3s\n\n    .slide-enter, .slide-leave-to\n        transform translate3d(100%, 0, 0)\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-list.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./top-list.vue?vue&type=template&id=b0b289d2&scoped=true&\"\nimport script from \"./top-list.vue?vue&type=script&lang=js&\"\nexport * from \"./top-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./top-list.vue?vue&type=style&index=0&id=b0b289d2&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b0b289d2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}