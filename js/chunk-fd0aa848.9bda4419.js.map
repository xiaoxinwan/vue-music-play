{"version":3,"sources":["webpack:///./src/components/search/search.vue?b5b4","webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?cc7c","webpack:///./src/components/search/search.vue","webpack:///./src/components/search/search.vue?8d5f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","query","onQueryChange","directives","name","rawName","value","expression","attrs","data","shortcut","refresh-delay","refreshDelay","_v","_l","item","key","n","click","$event","addQuery","k","_s","searchHistory","showConfirm","searches","select","delete","deleteSearchHistory","saveSearch","listScroll","blurInput","text","confirm-btn-text","confirm","clearSearchHistory","staticRenderFns","searchvue_type_script_lang_js_","components","Scroll","scroll_scroll","SearchBox","search_box","Suggest","suggest","SearchList","search_list","Confirm","confirm_confirm","mixins","mixin","hotKey","created","_getHotKey","computed","concat","watch","newQuery","_this","setTimeout","$refs","refresh","methods","Object","objectSpread","handlePlaylist","playlist","bottom","length","shortcutWrapper","style","searchResult","show","_this2","search","then","res","code","config","hotkey","slice","vuex_esm","search_searchvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_search_vue_vue_type_style_index_0_id_22e98be9_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_search_vue_vue_type_style_index_0_id_22e98be9_scoped_true_lang_stylus___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-fd0aa848.9bda4419.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"search-box-wrapper\"},[_c('search-box',{ref:\"searchBox\",on:{\"query\":_vm.onQueryChange}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.query),expression:\"!query\"}],ref:\"shortcutWrapper\",staticClass:\"shortcut-wrapper\"},[_c('scroll',{ref:\"shortcut\",staticClass:\"shortcut\",attrs:{\"data\":_vm.shortcut,\"refresh-delay\":_vm.refreshDelay}},[_c('div',[_c('div',{staticClass:\"hot-key\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"热门搜索\")]),_c('ul',_vm._l((_vm.hotKey),function(item){return _c('li',{key:item.n,staticClass:\"item\",on:{\"click\":function($event){return _vm.addQuery(item.k)}}},[_c('span',[_vm._v(_vm._s(item.k))])])}),0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory.length),expression:\"searchHistory.length\"}],staticClass:\"search-history\"},[_c('h1',{staticClass:\"title\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"搜索历史\")]),_c('span',{staticClass:\"clear\",on:{\"click\":_vm.showConfirm}},[_c('i',{staticClass:\"icon-clear\"})])]),_c('search-list',{attrs:{\"searches\":_vm.searchHistory},on:{\"select\":_vm.addQuery,\"delete\":_vm.deleteSearchHistory}})],1)])])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],ref:\"searchResult\",staticClass:\"search-result\"},[_c('suggest',{ref:\"suggest\",attrs:{\"query\":_vm.query},on:{\"select\":_vm.saveSearch,\"listScroll\":_vm.blurInput}})],1),_c('confirm',{ref:\"confirm\",attrs:{\"text\":\"是否清空所有搜索记录？\",\"confirm-btn-text\":\"清空\"},on:{\"confirm\":_vm.clearSearchHistory}}),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"search\">\n        <div class=\"search-box-wrapper\">\n            <search-box ref=\"searchBox\" @query=\"onQueryChange\"></search-box>\n        </div>\n        <div class=\"shortcut-wrapper\" v-show=\"!query\" ref=\"shortcutWrapper\">\n            <scroll class=\"shortcut\" :data=\"shortcut\" ref=\"shortcut\" :refresh-delay=\"refreshDelay\">\n                <div>\n                    <div class=\"hot-key\">\n                        <h1 class=\"title\">热门搜索</h1>\n                        <ul>\n                            <li @click=\"addQuery(item.k)\" class=\"item\" v-for=\"item in hotKey\" :key=\"item.n\">\n                                <span>{{item.k}}</span>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class=\"search-history\" v-show=\"searchHistory.length\">\n                        <h1 class=\"title\">\n                            <span class=\"text\">搜索历史</span>\n                            <span class=\"clear\" @click=\"showConfirm\">\n                            <i class=\"icon-clear\"></i>\n                        </span>\n                        </h1>\n                        <search-list :searches=\"searchHistory\"\n                                     @select=\"addQuery\"\n                                     @delete=\"deleteSearchHistory\"\n                        ></search-list>\n                    </div>\n                </div>\n            </scroll>\n        </div>\n        <div class=\"search-result\" v-show=\"query\" ref=\"searchResult\">\n            <suggest @select=\"saveSearch\"\n                     ref=\"suggest\"\n                     @listScroll=\"blurInput\"\n                     :query=\"query\"\n            ></suggest>\n        </div>\n        <confirm ref=\"confirm\"\n                 text=\"是否清空所有搜索记录？\"\n                 confirm-btn-text=\"清空\"\n                 @confirm=\"clearSearchHistory\"\n        ></confirm>\n        <router-view></router-view>\n    </div>\n</template>\n\n<script>\n    import SearchBox from '../../base/search-box/search-box'\n    import Suggest from '../suggest/suggest'\n    import SearchList from '../../base/search-list/search-list'\n    import Confirm from '../../base/confirm/confirm'\n    import {getHotKey} from \"../../api/search\"\n    import {ERR_OK} from \"../../api/config\";\n    import {mapActions} from 'vuex'\n    import Scroll from \"../../base/scroll/scroll\"\n    import {playlistMixin, searchMixin} from \"../../assets/js/mixin\";\n\n\n    export default {\n        name: \"search\",\n        components: {\n            Scroll,\n            SearchBox,\n            Suggest,\n            SearchList,\n            Confirm\n        },\n        mixins: [playlistMixin, searchMixin],\n        data() {\n            return {\n                hotKey: [],\n            }\n        },\n        created() {\n            this._getHotKey()\n        },\n        computed: {\n            shortcut() {\n                return this.hotKey.concat(this.searchHistory)\n            }\n        },\n        watch: {\n            query(newQuery) {\n                if (!newQuery) {\n                    setTimeout(() => {\n                        this.$refs.shortcut.refresh()\n                    }, 20)\n                }\n            }\n        },\n        methods: {\n            handlePlaylist(playlist) {\n                const bottom = playlist.length ? '60px' : ''\n\n                this.$refs.shortcutWrapper.style.bottom = bottom\n                this.$refs.shortcut.refresh()\n                this.$refs.searchResult.style.bottom = bottom\n                this.$refs.suggest.refresh()\n            },\n            showConfirm() {\n                this.$refs.confirm.show()\n            },\n            _getHotKey() {\n                getHotKey().then((res) => {\n                    if (res.code === ERR_OK) {\n                        this.hotKey = res.data.hotkey.slice(0, 10)\n                    }\n                })\n            },\n            ...mapActions([\n                'clearSearchHistory'\n            ])\n        }\n    }\n</script>\n\n<style scoped lang='stylus'>\n    @import \"../../assets/stylus/variable.styl\"\n    @import \"../../assets/stylus/mixin.styl\"\n\n    .search\n        .search-box-wrapper\n            margin: 20px\n\n        .shortcut-wrapper\n            position fixed\n            top 178px\n            bottom 0\n            width 100%\n\n            .shortcut\n                height 100%\n                overflow hidden\n\n                .hot-key\n                    margin 0 20px 20px 20px\n\n                    .title\n                        margin-bottom 20px\n                        font-size $font-size-medium\n                        color $color-text-l\n\n                    .item\n                        display inline-block\n                        padding 5px 10px\n                        margin 0 20px 10px 0\n                        border-radius 6px\n                        background $color-highlight-background\n                        font-size $font-size-medium\n                        color $color-text-d\n\n                .search-history\n                    position relative\n                    margin 0 20px\n\n                    .title\n                        display flex\n                        align-items center\n                        height 40px\n                        font-size $font-size-medium\n                        color $color-text-l\n\n                        .text\n                            flex 1\n\n                        .clear\n                            extend-click()\n\n                            .icon-clear\n                                font-size $font-size-medium\n                                color $color-text-d\n\n        .search-result\n            position fixed\n            width 100%\n            top 178px\n            bottom 0\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=22e98be9&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=22e98be9&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22e98be9\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=22e98be9&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=style&index=0&id=22e98be9&scoped=true&lang=stylus&\""],"sourceRoot":""}